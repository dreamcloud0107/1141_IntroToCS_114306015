<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>114306015_HW7_1A2B</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #record {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            min-height: 150px;
        }
    </style>
</head>
<body>
    <h1>114306015_HW7_1A2B</h1>

    <input type="text" id="guessInput" placeholder="Enter 4 unique numbers" maxlength="4">
    <button onclick="play()">Guess</button>

    <div id="record"></div>

    <script>
        let answer = generateAnswer();
        let count = 0;

        function generateAnswer() {
            let pool = [0,1,2,3,4,5,6,7,8,9];
            let ans = [];
            for (let i = 0; i < 4; i++) {
                let idx = Math.floor(Math.random() * pool.length);
                ans.push(pool[idx]);
                pool.splice(idx, 1);
            }
            return ans.join("");
        }

        function play() {
            let input = document.getElementById("guessInput").value;

            if (!isValid(input)) {
                alert("Invalid input! Must be 4 unique digits.");
                return;
            }

            count++;
            let result = checkAB(input, answer);

            document.getElementById("record").innerHTML += `${count}. ${input} â†’ ${result}<br>`;

            if (result === "4A0B") {
                alert(`Correct! Total Attempts: ${count}`);
            }

            document.getElementById("guessInput").value = "";
        }

        function isValid(str) {
            if (str.length !== 4) return false;
            if (!/^\d{4}$/.test(str)) return false;
            let set = new Set(str);
            return set.size === 4;
        }

        function checkAB(guess, ans) {
            let A = 0, B = 0;
            for (let i = 0; i < 4; i++) {
                if (guess[i] === ans[i]) A++;
                else if (ans.includes(guess[i])) B++;
            }
            return `${A}A${B}B`;
        }
    </script>
</body>
</html>
